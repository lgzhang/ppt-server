<link rel="stylesheet" href="/ppt/koa/style.css">
<section  style='padding:10px;'>
    <div class='content'>
        <h2 style='margin-top: 0px;' id="-error-handling-">错误处理（Error Handling）</h2>
        <p>  除非应用执行环境被配置为 <code>"test"</code>，Koa 都将会将所有错误信息输出到 stderr，和 Connect 一样，你可以自己定义一个「错误事件」来监听 Koa app 中发生的错误：</p>
        <pre><code class="lang-js">app.on('error', function(err){
  log.error('server error', err);
});</code></pre>
        <p>  当任何 req 或者 res 中出现的错误无法被回应到客户端时，Koa 会在第二个参数传入这个错误的上下文：</p>
        <pre><code class="lang-js">app.on('error', function(err, ctx){
  log.error('server error', err, ctx);
});</code></pre>
        <p>  如果任何错误有可能被回应到客户端，比如当没有新数据写入 socket 时，Koa 会默认返回一个 500 错误，并抛出一个 app 级别的错误到日志处理中间件中。</p>
        <br>
        <!--<p style='color:red'> try-catch捕获异步报错问题</p>-->
    </div>
</section>
